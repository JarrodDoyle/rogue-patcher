<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><title>Sunlight Converter</title>

<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"></head><body>
<table border="0" cellpadding="0" cellspacing="0" width="85%">
  <tbody><tr valign="top"> 
    <td align="center"><font size="5"><i>Sunlight Calculator</i> by Nameless Voice</font><br>
      	<form action="" method="post" name="frm1" id="frm1">
      		<table border="0" width="300">
          	<tbody><tr>
          		<td>Latitude</td>
          		<td><input name="txtLat" id="txtLat" value="0.00" type="text"></td>
         		</tr>
          	<tr>
          		<td>Longitude </td>
          		<td><input name="txtLong" id="txtLong2" value="0.00" type="text"></td>
         		</tr>
         	</tbody></table>
      		<p>
      			<input name="cmdCalculate!" onclick="Calculate()" id="cmdCalculate!3" value="Calculate the X, Y, and Z" type="button">
     			</p>
      		<p>X
        			<input name="txtX" id="txtX2" value="0.0000" type="text">
			Y
			<input name="txtY" id="txtY2" value="0.0000" type="text">
			Z
			<input name="txtZ" id="txtZ2" value="0.0000" type="text">
     			</p>
     		</form>
        <p align="left">This is a simple tool to help you align your sunlight (or moonlight) with your sun (or moon).</p>
    <p align="left">Simply
enter the Latitude and Longitude of your celestial object into the top
two boxes, and then press the calculate button to find out the values
you need to use for the <cite>Sunlight Direction</cite> field in the Editors-&gt;Mission Parameters-&gt;Rendering Parameters window. </p></td>
  </tr>
</tbody></table>
<script type="text/javascript" language="JavaScript">
<!--
	function Calculate() {

	var Val = new Array()

	var Longitude = document.frm1.txtLong.value 
	var Latitude = document.frm1.txtLat.value

	if ((isNaN(Longitude = parseFloat(Longitude % 360 ))) || (isNaN(Latitude = parseFloat(Latitude % 360)))) {
		return 0;
	}

	var Rotation = Math.floor(Longitude / 90)
	
	var Z = 1 - (Latitude / 90)
	var Z2 = Z
	
	Val[Rotation % 2] = (1 - ((Longitude % 90) / 90))
	Val[(Rotation + 1) % 2] = ((Longitude % 90) / 90)
	
	if ((Rotation % 3) == 0) {
			var X = -Val[0]
	} else {
			var X = Val[0]
	}
	
	if (Rotation >= 2) {
			var Y = -Val[1]
	} else {
			var Y = Val[1]
	}

	if (Math.abs(X) > Math.abs(Y)) {
			Z = Z * Math.abs(X)
	} else {
			Z = Z * Math.abs(Y)
	}
	
	X = X * (1 - Z2)
	Y = Y * (1 - Z2)
	
	var HighestVal = Math.abs(X)
	if (Math.abs(Y) > HighestVal) { HighestVal = Math.abs(Y) }
	if (Math.abs(Z) > HighestVal) { HighestVal = Math.abs(Z) }
	
	var Multiple = 1 / HighestVal
	X = X * Multiple
	Y = Y * Multiple
	Z = Z * Multiple

	document.frm1.txtX.value = X.toFixed(4)
	document.frm1.txtY.value = (0 - Y).toFixed(4)
	document.frm1.txtZ.value = (0 - Z).toFixed(4)

	}
-->
</script>
</body></html>